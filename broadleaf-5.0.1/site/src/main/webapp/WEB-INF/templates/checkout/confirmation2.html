<div layout:decorator="layout/fullPageNoNavLayout" layout:fragment="content">
    <head>
        <title th:utext="|Order Confirmation ${order.orderNumber}|"></title>
    </head>

    <div id="order_confirmation">
        <h2><span th:utext="#{confirmation.success}">Success!</span></h2>
        <h3><span th:utext="#{confirmation.orderNum}">Order Confirmation #</span> - <span th:utext="${order.orderNumber}"/></h3>
        <p class="confirmation-note"><span th:utext="#{confirmation.confirmEmail.toBeSent}">A confirmation email will be sent to</span> <span th:utext="${order.emailAddress}"></span>.</p>
    </div>

    <div id="cart">

        <div class="cart_title"><span th:utext="#{confirmation.orderSummary}">Order Summary</span></div>

                <div id="cart_total" class="group">
            <h3><span th:utext="#{confirmation.orderTotal}">Order Total</span></h3>
           
        </div>

        <div class="cart_title"><span th:utext="#{confirmation.shipping.info}">Shipping Information</span></div>

        <div class="clearfix"></div>

        
        
        

        <div class="cart_title"><span th:utext="#{confirmation.billing.info}">Billing Information</span></div>

        <div class="clearfix"></div>

        <div class="payment_method" th:each="payment : ${order.payments}" th:object="${payment}" th:inline="text">
            <div th:if="${payment.active}" class="left_content">
                <h3><span th:utext="#{confirmation.payment.method}">Payment Method</span></h3>
                Payment type: [[*{type.friendlyType}]]<br/>
                Amount paid: <span blc:price="*{amount}" />
                <div th:if="${payment.initialTransaction != null}">
                    <div th:if="!*{#strings.isEmpty(initialTransaction.additionalFields['CARD_TYPE'])}">
                        <b th:utext="*{initialTransaction.additionalFields['CARD_TYPE']}"/><br/>
                        ****<span th:utext="*{initialTransaction.additionalFields['LAST_FOUR']}"/><br/>
                        <span th:utext="#{confirmation.exp}">exp.</span> <span th:utext="*{initialTransaction.additionalFields['EXP_DATE']}"/>
                        <address>
                            [[*{billingAddress.firstName == null ? '' : billingAddress.firstName}]]&nbsp;[[*{billingAddress.lastName == null ? '' : billingAddress.lastName}]]<br/>
                            [[*{billingAddress.phonePrimary?.phoneNumber == null ? '' : billingAddress.phonePrimary?.phoneNumber}]]<br/>
                            [[*{billingAddress.addressLine1 == null ? '' : billingAddress.addressLine1}]]<br/>
                            [[*{billingAddress.addressLine2 == null ? '' : billingAddress.addressLine2}]]<br th:if="!*{#strings.isEmpty(billingAddress.addressLine2)}"/>
                            [[*{billingAddress.city == null ? '' : billingAddress.city}]],&nbsp;[[*{billingAddress.stateProvinceRegion == null ? '' : billingAddress.stateProvinceRegion}]]&nbsp;[[*{billingAddress.postalCode == null ? '' : billingAddress.postalCode}]]<br/>
                            [[*{billingAddress.isoCountryAlpha2.name == null ? '' : billingAddress.isoCountryAlpha2.name}]]<br/>
                        </address>
                    </div>
                    <div th:if="!*{#strings.isEmpty(initialTransaction.additionalFields['ACCOUNT_CREDIT_NUM'])}">
                        <span th:utext="#{cart.accountCredit.accounts}">Accounts</span><br/>
                        <b th:utext="*{initialTransaction.additionalFields['ACCOUNT_CREDIT_NUM']}"/><br/>
                    </div>
                    <div th:if="!*{#strings.isEmpty(initialTransaction.additionalFields['GIFT_CARD_NUM'])}">
                        <span th:utext="#{cart.giftCardNumber}">Gift Card Number</span><br/>
                        <b th:utext="*{initialTransaction.additionalFields['GIFT_CARD_NUM']}"/><br/>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>

</div>
